"use strict";(self.webpackChunkDigiCorpV1=self.webpackChunkDigiCorpV1||[]).push([[179],{4900:(y,f,a)=>{a.d(f,{t:()=>E});var r=a(520),e=a(2843),d=a(8889),s=a(262),m=a(2340),v=a(1223);let E=(()=>{class h{constructor(o){this.http=o,this.adresse_url=m.N.urlCorporate,this.urlAll=m.N.urlAllApp}getTransactionTypes(o){const t={headers:new r.WM({Accept:"application/json","content-type":"application/json",Authorization:"Bearer "+o})};return this.http.get(this.adresse_url+"getTransactionTypes",t).pipe((0,d.X)(2),(0,s.K)(this.handleError))}GetBill(o,t){const n={headers:new r.WM({Accept:"application/json","content-type":"application/json",Authorization:"Bearer "+t})};return this.http.post(this.urlAll+"getinvoices",JSON.stringify(o),n).pipe((0,s.K)(this.handleError))}DownloadF(o,t){return this.http.get(this.adresse_url+"GetBase64FromCSVBenefFile?FileType="+o,{headers:new r.WM({Accept:"application/json","content-type":"application/json",Authorization:"Bearer "+t}),observe:"response",reportProgress:!0}).pipe((0,s.K)(this.handleError))}getinvoicesById(o,t){const n={headers:new r.WM({Accept:"application/json","content-type":"application/json",Authorization:"Bearer "+t})};return this.http.post(this.urlAll+"getinvoicesById",JSON.stringify(o),n).pipe((0,s.K)(this.handleError))}createtransactionbenefmultiple(o,t){const n={headers:new r.WM({Accept:"application/json","content-type":"application/json",Authorization:"Bearer "+t})};return this.http.post(this.urlAll+"createtransactionbenefmultiple",JSON.stringify(o),n).pipe((0,s.K)(this.handleError))}InitiationbyFmandatCsv(o,t){const n={headers:new r.WM({Accept:"application/json","content-type":"application/json",Authorization:"Bearer "+t})};return this.http.post(this.urlAll+"InitiationbyFmandatCsv",JSON.stringify(o),n).pipe((0,s.K)(this.handleError))}updateTransaction(o,t){const n={headers:new r.WM({Accept:"application/json","content-type":"application/json",Authorization:"Bearer "+t})};return this.http.post(this.urlAll+"updateTransaction",JSON.stringify(o),n).pipe((0,s.K)(this.handleError))}GetListTransactionDetails(o,t){const n={headers:new r.WM({Accept:"application/json","content-type":"application/json",Authorization:"Bearer "+t})};return this.http.post(this.urlAll+"GetListTransactionDetails",JSON.stringify(o),n).pipe((0,s.K)(this.handleError))}GetListTransactionByData(o,t){const n={headers:new r.WM({Accept:"application/json","content-type":"application/json",Authorization:"Bearer "+t})};return this.http.post(this.urlAll+"GetListTransactionByData",JSON.stringify(o),n).pipe((0,s.K)(this.handleError))}RejectTransaction(o,t){const n={headers:new r.WM({Accept:"application/json","content-type":"application/json",Authorization:"Bearer "+t})};return this.http.post(this.urlAll+"RejectTransaction",JSON.stringify(o),n).pipe((0,s.K)(this.handleError))}ValidateTransactionInitiation(o,t){const n={headers:new r.WM({Accept:"application/json","content-type":"application/json",Authorization:"Bearer "+t})};return this.http.post(this.urlAll+"ValidateTransactionInitiation",JSON.stringify(o),n).pipe((0,s.K)(this.handleError))}getuserdata(o,t){const n={headers:new r.WM({Accept:"application/json","content-type":"application/json",Authorization:"Bearer "+t})};return this.http.post(this.urlAll+"getuserdata",JSON.stringify(o),n).pipe((0,s.K)(this.handleError))}createtransaction(o,t){const n={headers:new r.WM({Accept:"application/json","content-type":"application/json",Authorization:"Bearer "+t})};return this.http.post(this.urlAll+"createtransaction",JSON.stringify(o),n).pipe((0,s.K)(this.handleError))}prevalidatetransaction(o,t){const n={headers:new r.WM({Accept:"application/json","content-type":"application/json",Authorization:"Bearer "+t})};return this.http.post(this.urlAll+"prevalidatetransaction",JSON.stringify(o),n).pipe((0,s.K)(this.handleError))}validatetransaction(o,t){const n={headers:new r.WM({Accept:"application/json","content-type":"application/json",Authorization:"Bearer "+t})};return this.http.post(this.urlAll+"validatetransaction",JSON.stringify(o),n).pipe((0,s.K)(this.handleError))}GetBenef(o,t){const n={headers:new r.WM({Accept:"application/json","content-type":"application/json",Authorization:"Bearer "+t})};return this.http.post(this.adresse_url+"InfosBeneficiaireCorporate",JSON.stringify(o),n).pipe((0,s.K)(this.handleError))}VirementInitial(o,t){const n={headers:new r.WM({Accept:"application/json","content-type":"application/json",Authorization:"Bearer "+t})};return this.http.post(this.adresse_url+"AddPaiementForInitiation",JSON.stringify(o),n).pipe((0,s.K)(this.handleError))}ExecutePaiement(o,t){const n={headers:new r.WM({Accept:"application/json","content-type":"application/json",Authorization:"Bearer "+t})};return this.http.post(this.adresse_url+"VirementDigiCorp",JSON.stringify(o),n).pipe((0,s.K)(this.handleError))}VirementValide(o,t){const n={headers:new r.WM({Accept:"application/json","content-type":"application/json",Authorization:"Bearer "+t})};return this.http.post(this.adresse_url+"AddPaiementForValidation",JSON.stringify(o),n).pipe((0,s.K)(this.handleError))}getBenefForValidation(o,t){const n={headers:new r.WM({Accept:"application/json","content-type":"application/json",Authorization:"Bearer "+t})};return this.http.post(this.adresse_url+"InfoBenefForValidationCorporate",JSON.stringify(o),n).pipe((0,s.K)(this.handleError))}CancelPaiement(o,t){const n={headers:new r.WM({Accept:"application/json","content-type":"application/json",Authorization:"Bearer "+t})};return this.http.post(this.adresse_url+"CancelBenefpayment",JSON.stringify(o),n).pipe((0,s.K)(this.handleError))}getFormatedAmount(o,t,n){return this.http.get(this.adresse_url+"getFormatedAmount?currency="+o+"&amount="+t,{headers:new r.WM({Accept:"application/json","content-type":"application/json",Authorization:"Bearer "+n}),observe:"response",reportProgress:!0}).pipe((0,s.K)(this.handleError))}MinimalByRef(o,t){const n={headers:new r.WM({Accept:"application/json","content-type":"application/json",Authorization:"Bearer "+o})};return this.http.post(this.urlAll+"account/MinimalByRef/",JSON.stringify({referentiel:t,currency:"788",bank_id:"10"}),n).pipe((0,s.K)(this.handleError))}uploadFileVir(o,t){const n={headers:new r.WM({Accept:"application/json","content-type":"application/json",Authorization:"Bearer "+t})};return this.http.post(this.adresse_url+"saveFileForVirementcsvCorporate",JSON.stringify(o),n).pipe((0,s.K)(this.handleError))}getTransferOrderReport(o,t){const n={headers:new r.WM({Accept:"application/json","content-type":"application/json",Authorization:"Bearer "+t})};return this.http.post(this.urlAll+"getTransferOrderReport",JSON.stringify(o),n).pipe((0,s.K)(this.handleError))}getPaidTransferReport(o,t){const n={headers:new r.WM({Accept:"application/json","content-type":"application/json",Authorization:"Bearer "+t})};return this.http.post(this.urlAll+"getPaidTransferReport",JSON.stringify(o),n).pipe((0,s.K)(this.handleError))}getRejectedTransferReport(o,t){const n={headers:new r.WM({Accept:"application/json","content-type":"application/json",Authorization:"Bearer "+t})};return this.http.post(this.urlAll+"getRejectedTransferReport",JSON.stringify(o),n).pipe((0,s.K)(this.handleError))}GetFileByTransaction(o,t){const n={headers:new r.WM({Accept:"application/json","content-type":"application/json",Authorization:"Bearer "+t})};return this.http.post(this.urlAll+"GetFileByTransaction",JSON.stringify(o),n).pipe((0,s.K)(this.handleError))}extractData(o){return o||{}}handleError(o){let t="";return t=o.error instanceof ErrorEvent?"An error occurred:":`Error Code: ${o.status}\nMessage: ${o.message}`,(0,e._)(t)}}return h.\u0275fac=function(o){return new(o||h)(v.LFG(r.eN))},h.\u0275prov=v.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()},9860:(y,f,a)=>{a.d(f,{r:()=>h});var r=a(520),e=a(8889),d=a(262),s=a(2843),m=a(2340),v=a(1223),E=a(7656);let h=(()=>{class u{constructor(t,n){this.http=t,this.router=n,this.ListMenu=[]}utf8_to_b64(t){return window.btoa(unescape(encodeURIComponent(t)))}b64_to_utf8(t){return decodeURIComponent(escape(window.atob(t)))}getListmenu(){this.token=localStorage.getItem("token"),this.getMenuByUser(this.token).subscribe(t=>{this.ListMenu=t,localStorage.setItem("listmenu",JSON.stringify(this.ListMenu))},t=>{console.log(t),console.log("error API"),-1!=t.indexOf("401")&&this.router.navigate(["/"])})}CheckUserCorp(t,n){const i={headers:new r.WM({Accept:"application/json","content-type":"application/json",Authorization:"Bearer "+t})};return this.http.post(m.N.urlAllApp+"CheckUserCorp",JSON.stringify({App:n}),i).pipe((0,e.X)(2),(0,d.K)(this.handleError))}getMenuByUser(t){const n={headers:new r.WM({Accept:"application/json","content-type":"application/json",Authorization:"Bearer "+t})};return this.http.post(m.N.urlAllApp+"getMenuByUser",JSON.stringify({}),n).pipe((0,e.X)(2),(0,d.K)(this.handleError))}getTiersByIdDigital(t){const n={headers:new r.WM({Accept:"application/json","content-type":"application/json",Authorization:"Bearer "+t})};return this.http.post(m.N.urlCorporate+"ListTiersByIdDigital",JSON.stringify({}),n).pipe((0,e.X)(2),(0,d.K)(this.handleError))}Authentifiaction(t,n){const i=new URLSearchParams;return i.set("username",t),i.set("password",n),i.set("grant_type","password"),i.set("scope","openid 8d083a5a-32f1-42b1-9f5f-0444da5b2889 offline_access"),i.set("client_id","8d083a5a-32f1-42b1-9f5f-0444da5b2889"),i.set("response_type","token id_token"),this.http.post("https://stbclientb2c.b2clogin.com/stbclientb2c.onmicrosoft.com/b2c_1_signin_ropc/oauth2/v2.0/token",i.toString(),{headers:new r.WM({"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}),observe:"response",reportProgress:!0}).pipe((0,d.K)(this.handleError))}handleError(t){let n="";return n=t.error instanceof ErrorEvent?"An error occurred:":`Error Code: ${t.status}\nMessage: ${t.message}`,(0,s._)(n)}}return u.\u0275fac=function(t){return new(t||u)(v.LFG(r.eN),v.LFG(E.F0))},u.\u0275prov=v.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},2340:(y,f,a)=>{a.d(f,{N:()=>r});const r={production:!0,app:"DEV",urlCorporate:"https://openbank.stb.com.tn/api/app/Corporate-dev/",urlAllApp:"https://openbank.stb.com.tn/api/app/alldev/",urlTrade:"https://openbank.stb.com.tn/api/trade/"}},3391:(y,f,a)=>{var r=a(2313),e=a(1223),d=a(7656),s=a(2382),m=a(2340),v=a(9860),E=a(4900),h=a(9808);function u(l,g){1&l&&(e.TgZ(0,"div",32)(1,"div",33)(2,"span",34),e._uU(3,"Loading..."),e.qZA()()())}const t=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:(()=>{class l{constructor(p,c,b,M){this.fb=p,this.router=c,this.loginService=b,this.VirServ=M,this.ListMenu=[],this.transactiontypes=[],this.msgAlert="",this.loader=!1,this.createForm()}ngOnInit(){var p,c;localStorage.removeItem("tiersClient"),localStorage.setItem("ret",""),localStorage.clear(),null===(p=this.f)||void 0===p||p.login.setValue(""),null===(c=this.f)||void 0===c||c.pwd.setValue("")}login(){var p;this.loader=!0,localStorage.setItem("cuser",null===(p=this.f)||void 0===p?void 0:p.login.value),localStorage.setItem("istrue","true"),this.Authenticate()}createForm(){this.LoginForm=this.fb.group({login:["",s.kI.required],pwd:["",s.kI.required]})}get f(){return this.LoginForm.controls}Authenticate(){var p,c,b,M,T,S;"CPG_BUDGET1"==(null===(p=this.f)||void 0===p?void 0:p.login.value)&&(null===(c=this.f)||void 0===c||c.login.setValue("CPG_BUDGET"),localStorage.setItem("typevalidation","Initiation")),"CPG_BUDGET2"==(null===(b=this.f)||void 0===b?void 0:b.login.value)&&(null===(M=this.f)||void 0===M||M.login.setValue("CPG_BUDGET"),localStorage.setItem("typevalidation","Validation finale")),this.loginService.Authentifiaction(null===(T=this.f)||void 0===T?void 0:T.login.value,null===(S=this.f)||void 0===S?void 0:S.pwd.value).subscribe(O=>{var _;localStorage.setItem("login",null===(_=this.f)||void 0===_?void 0:_.login.value.trim()),localStorage.setItem("token",O.body.access_token),this.loginService.CheckUserCorp(O.body.access_token,m.N.app).subscribe(A=>{var C,P;console.log("menu"),this.res=A,"Success"!=this.res.Status?(this.msgAlert="Vous n'\xeates pas autoris\xe9!",this.loader=!1,null===(C=document.getElementById("exampleModalLabelProcessedpop"))||void 0===C||C.setAttribute("style","color:red;font-weight:bold"),null===(P=document.getElementById("btnalertPop"))||void 0===P||P.click()):this.loginService.getMenuByUser(O.body.access_token).subscribe(j=>{console.log("menu"),this.ListMenu=j,this.getTransactionTypes(O.body.access_token),this.loader=!1,localStorage.setItem("listmenu",this.loginService.utf8_to_b64(JSON.stringify(this.ListMenu))),this.router.navigate(["home"])},j=>{console.log(j),console.log("error API"),-1!=j.indexOf("401")&&(this.loader=!1,this.router.navigate(["/"]))})},A=>{console.log(A),console.log("error API"),-1!=A.indexOf("401")&&(this.loader=!1,this.router.navigate(["/"]))})},O=>{var _,A;this.loader=!1,-1!=O.indexOf("400")&&(this.msgAlert="Votre login ou mot de passe est incorrect.",null===(_=document.getElementById("exampleModalLabelProcessedpop"))||void 0===_||_.setAttribute("style","color:red;font-weight:bold"),null===(A=document.getElementById("btnalertPop"))||void 0===A||A.click()),console.log(O),console.log("error API")})}getTransactionTypes(p){this.VirServ.getTransactionTypes(p).subscribe(c=>{this.transactiontypes=c,localStorage.setItem("transactiontypes",this.loginService.utf8_to_b64(JSON.stringify(this.transactiontypes)))})}FermerAlert(){var p;null===(p=document.getElementById("alertPop"))||void 0===p||p.setAttribute("class","modal fade  hide")}}return l.\u0275fac=function(p){return new(p||l)(e.Y36(s.qu),e.Y36(d.F0),e.Y36(v.r),e.Y36(E.t))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-login"]],decls:47,vars:4,consts:[[1,"section","register","min-vh-100","d-flex","flex-column","align-items-center","justify-content-center","py-4"],[1,"container"],[1,"row","justify-content-center"],[1,"col-lg-4","col-md-6","d-flex","flex-column","align-items-center","justify-content-center"],[1,"d-flex","justify-content-center","py-4"],["href","index.html",1,"logo","d-flex","align-items-center","w-auto"],["src","assets/img/logo.png","alt",""],[1,"d-none","d-lg-block"],[1,"card","mb-3"],[1,"card-body"],[1,"pt-4","pb-2"],[1,"card-title","text-center","pb-0","fs-4"],[1,"text-center","small"],["novalidate","",1,"row","g-3","needs-validation",3,"formGroup"],[1,"col-12"],["for","yourUsername",1,"form-label"],[1,"input-group","has-validation"],["id","inputGroupPrepend",1,"input-group-text"],["type","text","name","username","id","yourUsername","formControlName","login",1,"form-control"],[1,"invalid-feedback"],["for","yourPassword",1,"form-label"],["type","password","name","password","id","yourPassword","formControlName","pwd",1,"form-control"],["type","button",1,"btn","btn-primary","w-100",3,"disabled","click"],["style","text-align: center;",4,"ngIf"],["type","button","data-bs-toggle","modal","data-bs-target","#alertPop","id","btnalertPop",1,"btn","btn-primary",2,"display","none"],["id","alertPop","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade",2,"margin-top","15%"],["role","document",1,"modal-dialog"],[1,"modal-content",2,"place-items","center"],[1,"modal-header",2,"border-bottom","0"],["id","exampleModalLabelProcessedpop",1,"modal-title"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],[2,"text-align","center"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"]],template:function(p,c){1&p&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"a",5),e._UZ(6,"img",6),e.TgZ(7,"span",7),e._uU(8,"Digi Corp"),e.qZA()()(),e.TgZ(9,"div",8)(10,"div",9)(11,"div",10)(12,"h5",11),e._uU(13,"Se connecter"),e.qZA(),e.TgZ(14,"p",12),e._uU(15,"Veuillez saisir votre nom d'utilisateur et mot de passe pour se connecter"),e.qZA()(),e.TgZ(16,"form",13)(17,"div",14)(18,"label",15),e._uU(19,"Nom d'utilisateur"),e.qZA(),e.TgZ(20,"div",16)(21,"span",17),e._uU(22,"@"),e.qZA(),e._UZ(23,"input",18),e.TgZ(24,"div",19),e._uU(25,"Veuillez saisir votre login."),e.qZA()()(),e.TgZ(26,"div",14)(27,"label",20),e._uU(28,"Mot de passe"),e.qZA(),e._UZ(29,"input",21),e.TgZ(30,"div",19),e._uU(31,"Veuillez saisir votre mot de passe"),e.qZA()(),e.TgZ(32,"div",14)(33,"button",22),e.NdJ("click",function(){return c.login()}),e._uU(34,"Se connecter"),e.qZA()()()(),e.YNc(35,u,4,0,"div",23),e.qZA()()()()(),e._UZ(36,"button",24),e.TgZ(37,"div",25)(38,"div",26)(39,"div",27)(40,"div",28)(41,"h5",29)(42,"p"),e._uU(43),e.qZA()()(),e.TgZ(44,"div",30)(45,"button",31),e.NdJ("click",function(){return c.FermerAlert()}),e._uU(46,"Fermer"),e.qZA()()()()()),2&p&&(e.xp6(16),e.Q6J("formGroup",c.LoginForm),e.xp6(17),e.Q6J("disabled",!c.LoginForm.valid),e.xp6(2),e.Q6J("ngIf",c.loader),e.xp6(8),e.hij(" ",c.msgAlert," "))},directives:[s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,h.O5],styles:[""]}),l})()},{path:"home",loadChildren:()=>a.e(609).then(a.bind(a,1609)).then(l=>l.HomeModule),data:{breadcrumb:"Home"}},{path:"**",redirectTo:"not-found",pathMatch:"full"}];let n=(()=>{class l{}return l.\u0275fac=function(p){return new(p||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({imports:[[d.Bz.forRoot(t,{useHash:!0})],d.Bz]}),l})(),i=(()=>{class l{constructor(){this.title="DigiCorpV1"}}return l.\u0275fac=function(p){return new(p||l)},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-root"]],decls:1,vars:0,template:function(p,c){1&p&&e._UZ(0,"router-outlet")},directives:[d.lC],styles:[""]}),l})();var B=a(2712),I=a(520),L=a(72),U=a(8567);let N=(()=>{class l{}return l.\u0275fac=function(p){return new(p||l)},l.\u0275mod=e.oAB({type:l,bootstrap:[i]}),l.\u0275inj=e.cJS({providers:[],imports:[[r.b2,n,B.PW,I.JF,L.ef,s.UX,s.u5,U.JX]]}),l})();m.N.production&&(0,e.G48)(),r.q6().bootstrapModule(N).catch(l=>console.error(l))}},y=>{y.O(0,[736],()=>y(y.s=3391)),y.O()}]);