"use strict";(self.webpackChunkDigiCorpV1=self.webpackChunkDigiCorpV1||[]).push([[484],{9484:(R,_,u)=>{u.r(_),u.d(_,{PaiementfactureModule:()=>N});var s=u(9808),d=u(7656),t=u(1223),p=u(6605),g=u(4900),h=u(2212),m=u(9860),c=u(2382);function v(n,a){1&n&&(t.TgZ(0,"h3",43),t._uU(1,"Factures STEG"),t.qZA())}function Z(n,a){1&n&&(t.TgZ(0,"h3",43),t._uU(1,"Factures SONEDE"),t.qZA())}function f(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td",44),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td",45)(12,"button",37),t._uU(13),t.qZA()(),t.TgZ(14,"td",46)(15,"div",0)(16,"div",31)(17,"button",32),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw(2).GetBillById(l.id)}),t._UZ(18,"i",47),t.qZA()(),t.TgZ(19,"div",33)(20,"button",39),t.NdJ("click",function(){const o=t.CHM(e),l=o.index,r=o.$implicit;return t.oxw(2).RemoveOneBill(l,r.invoiceAmount)}),t._UZ(21,"i",48),t.qZA()()()()()}if(2&n){const e=a.$implicit;t.xp6(2),t.hij("",e.invoicePreiod.fromDate.substring(0,10)," "),t.xp6(2),t.Oqu(e.invoicePreiod.toDate.substring(0,10)),t.xp6(2),t.Oqu(e.billerRs),t.xp6(2),t.Oqu(e.invoiceRef),t.xp6(2),t.hij(" ",e.invoiceAmount,""),t.xp6(3),t.Oqu(e.paymentStatus)}}function T(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",40)(1,"div",41),t.YNc(2,v,2,0,"h3",42),t.YNc(3,Z,2,0,"h3",42),t.TgZ(4,"div")(5,"table",23)(6,"thead",24)(7,"tr",25)(8,"th",26),t._uU(9,"Date de cr\xe9ation"),t.qZA(),t.TgZ(10,"th",26),t._uU(11,"Date d'\xe9ch\xe9ance"),t.qZA(),t.TgZ(12,"th",26),t._uU(13,"Facturier"),t.qZA(),t.TgZ(14,"th",26),t._uU(15,"R\xe9f\xe9rence"),t.qZA(),t.TgZ(16,"th",26),t._uU(17,"Montant"),t.qZA(),t.TgZ(18,"th",26),t._uU(19,"Etat"),t.qZA(),t.TgZ(20,"th",26),t._uU(21,"Actions"),t.qZA()()(),t.TgZ(22,"tbody"),t.YNc(23,f,22,6,"tr",27),t.qZA()()(),t.TgZ(24,"div",28)(25,"div",0)(26,"span",29),t._uU(27),t.qZA()(),t.TgZ(28,"div",30)(29,"div",31)(30,"button",32),t.NdJ("click",function(){return t.CHM(e),t.oxw().AddValue()}),t._uU(31,"Ajouter une facture"),t.qZA()(),t.TgZ(32,"div",33)(33,"button",39),t.NdJ("click",function(){return t.CHM(e),t.oxw().ClearBills()}),t._uU(34,"Retirer les factures"),t.qZA()()()()()()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf","steg"==e.value),t.xp6(1),t.Q6J("ngIf","steg"!=e.value),t.xp6(20),t.Q6J("ngForOf",e.TotalBills),t.xp6(4),t.hij("Total \xe0 payer: ",e.TotalAmount,"")}}function b(n,a){1&n&&(t.TgZ(0,"div",51)(1,"p",55),t._uU(2,"R\xe9f\xe9rence existe. Veuillez saisir une autre r\xe9f\xe9rence. "),t.qZA()())}function A(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",22)(1,"div",49),t._UZ(2,"img",50),t.qZA(),t.TgZ(3,"div",0)(4,"div",51),t._uU(5," R\xe9f\xe9rence de l'abonnement "),t.TgZ(6,"span",52),t._uU(7,"*"),t.qZA(),t.TgZ(8,"input",53),t.NdJ("keyup",function(o){return t.CHM(e),t.oxw().onKey(o)})("ngModelChange",function(o){return t.CHM(e),t.oxw().inputValue=o}),t.qZA()(),t.YNc(9,b,3,0,"div",54),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.s9C("src",e.img,t.LSH),t.xp6(6),t.Q6J("ngModel",e.inputValue),t.xp6(1),t.Q6J("ngIf",e.refexist)}}function x(n,a){1&n&&(t.TgZ(0,"div",51)(1,"p",55),t._uU(2,"R\xe9f\xe9rence existe. Veuillez saisir une autre r\xe9f\xe9rence. "),t.qZA()())}function C(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",22)(1,"div",49),t._UZ(2,"img",50),t.qZA(),t.TgZ(3,"div",0)(4,"div",51)(5,"div",56),t._uU(6,"Choisir un crit\xe9re de recherche"),t.TgZ(7,"span",52),t._uU(8,"*"),t.qZA()(),t.TgZ(9,"select",57),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().TypeRech=o})("change",function(){return t.CHM(e),t.oxw().getTypeRech()}),t.TgZ(10,"option",58),t._uU(11," Code Client "),t.qZA(),t.TgZ(12,"option",59),t._uU(13," R\xe9f\xe9rence "),t.qZA(),t.TgZ(14,"option",60),t._uU(15," N\xb0Contract "),t.qZA()()(),t.TgZ(16,"div",51),t._uU(17),t.TgZ(18,"span",52),t._uU(19,"*"),t.qZA(),t.TgZ(20,"input",53),t.NdJ("keyup",function(o){return t.CHM(e),t.oxw().onKey(o)})("ngModelChange",function(o){return t.CHM(e),t.oxw().inputValue=o}),t.qZA()(),t.YNc(21,x,3,0,"div",54),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.s9C("src",e.img,t.LSH),t.xp6(7),t.Q6J("ngModel",e.TypeRech),t.xp6(8),t.hij(" ",e.valuerech," "),t.xp6(3),t.Q6J("ngModel",e.inputValue),t.xp6(1),t.Q6J("ngIf",e.refexist)}}function U(n,a){1&n&&(t.TgZ(0,"button",61),t._uU(1,"Rechercher la facture"),t.qZA())}function q(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",62),t.NdJ("click",function(){return t.CHM(e),t.oxw().GetFact()}),t._uU(1,"Rechercher la facture"),t.qZA()}}function y(n,a){if(1&n&&(t.TgZ(0,"tr")(1,"td",44),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td",46)(12,"button",37),t._uU(13),t.qZA()(),t.TgZ(14,"td",46)(15,"div",0)(16,"div",31)(17,"button",63),t._UZ(18,"i",47),t.qZA()(),t.TgZ(19,"div",31)(20,"button",34),t._UZ(21,"i",48),t.qZA()()()()()),2&n){const e=a.$implicit;t.xp6(2),t.hij("",e.invoicePreiod.fromDate.substring(0,10)," "),t.xp6(2),t.Oqu(e.invoicePreiod.toDate.substring(0,10)),t.xp6(2),t.Oqu(e.billerRs),t.xp6(2),t.Oqu(e.invoiceRef),t.xp6(2),t.hij(" ",e.invoiceAmount,""),t.xp6(3),t.Oqu(e.paymentStatus)}}let M=(()=>{class n{constructor(e,i,o,l,r){this.BanqueServ=e,this.router=i,this.VirServ=o,this.OpImp=l,this.auth=r,this.activebtn=!1,this.TotalBills=[],this.totalP="1200 TND",this.refexist=!1,this.TotalAmount=0,this.Bill=[]}ngOnInit(){this.token=localStorage.getItem("token"),this.inputValue="",this.activebtn=!1}gopay(e){var i;this.inputValue="",this.activebtn=!1,this.value=e,"steg"==this.value?(this.img="../../../assets/img/STeglogo.jpg",this.TotalBills=[],this.totalP=""):(this.valuerech="Reference",this.img="../../../assets/img/SONEDE.jpg",this.TotalBills=[],this.totalP=""),null===(i=document.getElementById("exampleModal"))||void 0===i||i.setAttribute("class","modal fade  show")}close(){var e;this.refexist=!1,null===(e=document.getElementById("exampleModal"))||void 0===e||e.setAttribute("class","modal fade  hide"),this.inputValue.value=""}onKey(e){this.refexist=!1,this.inputValue=e.target.value,this.activebtn=""!=this.inputValue}GetFact(){this.GetBillDetails()}close1(){var e;null===(e=document.getElementById("FactureModal"))||void 0===e||e.setAttribute("class","modal fade  hide")}GetBillDetails(){this.TotalBills.some(e=>e.invoiceRef===this.inputValue)?this.refexist=!0:("steg"==this.value?this.biller="701":(this.biller="502","clientCode"==this.TypeRech?(this.CodeClient=this.inputValue,this.inputValue="",this.contractNumber=""):"Reference"==this.TypeRech?(this.inputValue=this.inputValue,this.contractNumber="",this.CodeClient=""):(this.contractNumber=this.inputValue,this.inputValue="",this.CodeClient="")),this.refexist=!1,this.VirServ.GetBill({biller:this.biller,invoiceRef:this.inputValue,clientPassport:"",billerMf:"",contractNumber:this.contractNumber,clientMf:"",clientCin:"",clientCode:this.CodeClient},this.token).subscribe(i=>{var o;this.Bills=i.invoices;for(var l=0;l<this.Bills.length;l++)this.TotalBills.push(this.Bills[l]),this.TotalAmount=parseFloat(this.Bills[l].invoiceAmount.replace(",","."))+this.TotalAmount;null===(o=document.getElementById("exampleModal"))||void 0===o||o.setAttribute("class","modal fade  hide")},i=>{console.log("error API"),-1!=i.indexOf("401")&&this.router.navigate(["/"])}))}ClearBills(){this.TotalBills=[],this.totalP=""}RemoveOneBill(e,i){this.TotalBills.splice(e,1),this.TotalAmount=this.TotalAmount-parseFloat(i.replace(",","."))}AddValue(){var e;this.inputValue="",this.activebtn=!1,null===(e=document.getElementById("exampleModal"))||void 0===e||e.setAttribute("class","modal fade  show")}getTypeRech(){this.valuerech="clientCode"==this.TypeRech?"Code Client":"Reference"==this.TypeRech?"R\xe9f\xe9rence de l'abonnement":"Contract de l'abonnement"}GetBillById(e){this.VirServ.getinvoicesById({invoiceId:e,paymentMean:"110-01-C"},this.token).subscribe(o=>{var l;this.Bill=o.invoice,this.invoiceRef=this.Bill.invoiceRef,this.fromDate=this.Bill.invoicePreiod.fromDate.substring(0,10),this.toDate=this.Bill.invoicePreiod.toDate.substring(0,10),this.invoiceOriginalAmount=this.Bill.invoiceOriginalAmount,this.invoiceAmount=this.Bill.invoiceAmount,this.paymentStatus=this.Bill.paymentStatus,this.clientName=this.Bill.clientName,console.log(this.Bill),null===(l=document.getElementById("ModalOneBill"))||void 0===l||l.setAttribute("class","modal fade  show")},o=>{console.log("error API"),-1!=o.indexOf("401")&&this.router.navigate(["/"])})}validerp(){}Annulerp(){var e;null===(e=document.getElementById("ModalOneBill"))||void 0===e||e.setAttribute("class","modal fade  hide")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.t),t.Y36(d.F0),t.Y36(g.t),t.Y36(h.e),t.Y36(m.r))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-factures"]],decls:124,vars:13,consts:[[1,"row"],[1,"col-2"],[1,"col-3"],[1,"card","cardDash","mb-3",3,"click"],["src","../../../assets/img/STeglogo.jpg","alt","...",1,"img-fluid","rounded-start"],[1,"card-body",2,"text-align","center"],[1,"card-title"],["src","../../../assets/img/SONEDE.jpg","alt","...",1,"img-fluid","rounded-start"],["class","card",4,"ngIf"],["id","exampleModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","button","class","btn btn-primary","disabled","",4,"ngIf"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["id","FactureModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-body"],[1,"table","table-bordered"],[2,"border-bottom","hidden"],[1,"",2,"background","#0b5ed7","color","white"],["scope","col"],[4,"ngFor","ngForOf"],[1,"",2,"padding","2%"],[2,"text-align","center","padding","1%"],[1,"row",2,"text-align","end"],[1,"col-6"],["type","button",1,"btn","btn-info",3,"click"],[1,"col-6",2,"text-align","initial"],["type","button",1,"btn","btn-danger"],["id","ModalOneBill","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"col"],["type","button",1,"btn","btn-warning"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"card"],["id","divfichier1",1,"card-body"],["class","card-title","style","text-align: center;",4,"ngIf"],[1,"card-title",2,"text-align","center"],["scope","row"],[2,"text-align","-webkit-center"],[2,"text-align","right"],[1,"bi","bi-cash-coin"],[1,"bi","bi-trash"],[2,"text-align","center"],["alt","...",1,"img-fluid","rounded-start",2,"width","37%",3,"src"],[1,"col-12"],[2,"color","red"],[1,"custom-select","form-control",3,"ngModel","keyup","ngModelChange"],["class","col-12",4,"ngIf"],[2,"color","red","font-weight","bold"],[1,"font-weight-bold","TitleMobile",2,"text-align","initial"],["name","TypeRech",1,"custom-select","form-control",3,"ngModel","ngModelChange","change"],["value","clientCode"],["value","Reference","selected",""],["value","Contract"],["type","button","disabled","",1,"btn","btn-primary"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-info"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"div",1),t.TgZ(2,"div",2)(3,"div",3),t.NdJ("click",function(){return i.gopay("steg")}),t._UZ(4,"img",4),t.TgZ(5,"div",5)(6,"h5",6),t._uU(7,"Paiement STEG"),t.qZA()()()(),t._UZ(8,"div",1),t.TgZ(9,"div",2)(10,"div",3),t.NdJ("click",function(){return i.gopay("sonede")}),t._UZ(11,"img",7),t.TgZ(12,"div",5)(13,"h5",6),t._uU(14,"Paiement SONEDE"),t.qZA()()()()(),t.YNc(15,T,35,4,"div",8),t.TgZ(16,"div",9)(17,"div",10)(18,"div",11)(19,"div",12)(20,"div",0)(21,"h5",13),t._uU(22,"Ajouter une facture"),t.qZA()(),t.TgZ(23,"button",14),t.NdJ("click",function(){return i.close()}),t.TgZ(24,"span",15),t._uU(25,"\xd7"),t.qZA()()(),t.YNc(26,A,10,3,"div",16),t.YNc(27,C,22,5,"div",16),t.TgZ(28,"div",17),t.YNc(29,U,2,0,"button",18),t.YNc(30,q,2,0,"button",19),t.qZA()()()(),t.TgZ(31,"div",20)(32,"div",21)(33,"div",11)(34,"div",12)(35,"div",0)(36,"h5",13),t._uU(37,"Mes factures"),t.qZA()(),t.TgZ(38,"button",14),t.NdJ("click",function(){return i.close1()}),t.TgZ(39,"span",15),t._uU(40,"\xd7"),t.qZA()()(),t.TgZ(41,"div",22)(42,"table",23)(43,"thead",24)(44,"tr",25)(45,"th",26),t._uU(46,"Date de cr\xe9ation"),t.qZA(),t.TgZ(47,"th",26),t._uU(48,"Date d'\xe9ch\xe9ance"),t.qZA(),t.TgZ(49,"th",26),t._uU(50,"Facturier"),t.qZA(),t.TgZ(51,"th",26),t._uU(52,"R\xe9f\xe9rence"),t.qZA(),t.TgZ(53,"th",26),t._uU(54,"Montant"),t.qZA(),t.TgZ(55,"th",26),t._uU(56,"Etat"),t.qZA(),t.TgZ(57,"th",26),t._uU(58,"Actions"),t.qZA()()(),t.TgZ(59,"tbody"),t.YNc(60,y,22,6,"tr",27),t.qZA()()(),t.TgZ(61,"div",28)(62,"div",0)(63,"span",29),t._uU(64,"Total \xe0 payer: 1200 TND"),t.qZA()(),t.TgZ(65,"div",30)(66,"div",31)(67,"button",32),t.NdJ("click",function(){return i.AddValue()}),t._uU(68,"Ajouter une facture"),t.qZA()(),t.TgZ(69,"div",33)(70,"button",34),t._uU(71,"Retirer les factures"),t.qZA()()()()()()(),t.TgZ(72,"div",35)(73,"div",21)(74,"div",11)(75,"div",12)(76,"div",0)(77,"h5",13),t._uU(78),t.qZA()()(),t.TgZ(79,"div",22)(80,"div",0)(81,"div",36),t._uU(82," R\xe9f\xe9rence "),t.qZA(),t.TgZ(83,"div",36),t._uU(84),t.qZA()(),t._UZ(85,"br"),t.TgZ(86,"div",0)(87,"div",36),t._uU(88," Date Facture "),t.qZA(),t.TgZ(89,"div",36),t._uU(90),t.qZA()(),t._UZ(91,"br"),t.TgZ(92,"div",0)(93,"div",36),t._uU(94," Date d'\xe9cheance "),t.qZA(),t.TgZ(95,"div",36),t._uU(96),t.qZA()(),t._UZ(97,"br"),t.TgZ(98,"div",0)(99,"div",36),t._uU(100," Montant de la facture "),t.qZA(),t.TgZ(101,"div",36),t._uU(102),t.qZA()(),t._UZ(103,"br"),t.TgZ(104,"div",0)(105,"div",36),t._uU(106," Montant \xe0 payer "),t.qZA(),t.TgZ(107,"div",36),t._uU(108),t.qZA()(),t._UZ(109,"br"),t.TgZ(110,"div",0)(111,"div",36),t._uU(112," Statut "),t.qZA(),t.TgZ(113,"div",36)(114,"button",37),t._uU(115),t.qZA()()()(),t.TgZ(116,"div",28)(117,"div",30)(118,"div",31)(119,"button",38),t.NdJ("click",function(){return i.validerp()}),t._uU(120,"Valider"),t.qZA()(),t.TgZ(121,"div",33)(122,"button",39),t.NdJ("click",function(){return i.Annulerp()}),t._uU(123,"Annuler"),t.qZA()()()()()()()),2&e&&(t.xp6(15),t.Q6J("ngIf",i.TotalBills.length>0),t.xp6(11),t.Q6J("ngIf","steg"==i.value),t.xp6(1),t.Q6J("ngIf","steg"!=i.value),t.xp6(2),t.Q6J("ngIf",!i.activebtn),t.xp6(1),t.Q6J("ngIf",i.activebtn),t.xp6(30),t.Q6J("ngForOf",i.Bills),t.xp6(18),t.hij("Bienvenue M/MM ",i.clientName,""),t.xp6(6),t.hij(" ",i.invoiceRef," "),t.xp6(6),t.hij(" ",i.fromDate," "),t.xp6(6),t.hij(" ",i.toDate," "),t.xp6(6),t.hij(" ",i.invoiceOriginalAmount," TND "),t.xp6(6),t.hij(" ",i.invoiceAmount," TND "),t.xp6(7),t.Oqu(i.paymentStatus))},directives:[s.O5,s.sg,c.Fj,c.JJ,c.On,c.EJ,c.YN,c.Kr],styles:[".cardDash[_ngcontent-%COMP%]:hover{transform:scale(1.05)!important;cursor:pointer;box-shadow:0 10px 20px #0000001f,0 4px 8px #0000000f!important}.cardDash[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]:hover{color:#000;font-weight:bolder}.show[_ngcontent-%COMP%]{display:block}.hide[_ngcontent-%COMP%]{display:none}"]}),n})();const B=[{path:"",component:u(6123).O},{path:"facture",component:M,data:{breadcrumb:{alias:"Facture"}}}];let E=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[d.Bz.forChild(B)],d.Bz]}),n})(),N=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[s.ez,E,c.u5,c.UX]]}),n})()}}]);